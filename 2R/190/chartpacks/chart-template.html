<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>G-Cubed Charts</title>

  <!-- FreeStylin! -->
  <!-- https://open.spotify.com/track/47xLbuUdmD03ATrke934S1?si=791d3bd4e7684aa4 -->
  <style>

{% raw %}
@import url('https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,400;0,500;0,700;1,600&display=swap');

:root {
  --header-fade-in-time: 4.5s;
}


body,
html {
  margin: 0;
  padding: 0;
  height: 100vh;
  overflow: hidden;
  font-family: 'Poppins', arial, sans-serif;
  font-size: 16px;
  font-weight: 400;
  color: rgb(15, 76, 117);
}

.container {
  display: grid;
  grid-template-areas:
    "header header"
    "filter main-content"
    "footer footer";
  grid-template-rows: auto 1fr 1rem;
  grid-template-columns: 11rem 1fr;
  grid-column-gap: 0.5rem;
  height: 100vh;
  max-width: 85rem;
  margin: 0 auto;
  padding: 0px;
  box-sizing: border-box;
  overflow: hidden;

}

header {
  height: 84px;
  grid-area: header;
  overflow: hidden;
  display: flex;
  background-image: linear-gradient(
    to right,
    hsl(205, 44%, 40%),
    hsl(204, 57%, 30%)
  );
  align-items: center;
  justify-content: space-between;
  position: relative;
}

.logo-container {
  width: auto;
  height: 80%;
  display: flex;
  opacity: 0;
  margin-left: 1rem;
  margin-right: auto;
  animation: fadeIn var(--header-fade-in-time) forwards;
}

.logo-container svg {
  width: 100%;
  height: auto;
  aspect-ratio: auto 158.31 / 64;
}

.header-text {
  color: whitesmoke;
  font-size: 2rem;
  opacity: 0;
  text-align: center;
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  animation: fadeIn var(--header-fade-in-time) forwards;
  line-height: 0.8;
}

@keyframes fadeIn {
  to {
    opacity: 1;
  }
}

.filter {
  grid-area: filter;
  padding: 0;
  top: 0;
  overflow-y: auto;
  margin-left: 1rem;
}

.selection-div {
  margin-top: 1rem;
}

.selection-div-checkboxes {
  font-size: 0.7rem;
}

.selection-div-checkboxes label {
  display: block;
}

.chart-column {
  grid-area: main-content;
  overflow: auto;
  width: 100%;
  font-size: 0.8rem;
}

.text-danger {
  max-height: 4rem;
  overflow-y: auto;
  font-size: 0.8rem;
  transition: background-color 0.3s ease-in-out;
  text-align: center;
  box-sizing: border-box;
}

.text-danger:not(:empty) {
  background-color: orange;
  color: black;
  border: 5px dashed red;
}

.btn-group {
  display: flex;
  justify-content: center;
  margin-bottom: 1rem;
  margin-top: 2rem;
}

.btn {
  background-color: #0069d9;
  background-image: linear-gradient(#316fe7, #1a5ee0);
  color: whitesmoke;
  padding: 0.5rem 1rem;
  border: none;
  cursor: pointer;
  border-radius: 0.25rem;
  font-size: 0.8rem;
  margin: 1rem;
}

.gCubedChartDiv {
  display: flex;
  flex-direction: column;
  max-width: 100%;
}

.gCubedChartPlotlyDiv {
  max-width: 100%;
  width: 100%;
}

.applicableSectors {
  font-size: 0.8rem;
}

footer {
  color: whitesmoke;
  grid-area: footer;
  background-image: linear-gradient(
    to right,
    hsl(205, 44%, 40%),
    hsl(204, 57%, 30%)
  );
  padding: 0;
  bottom: 0;
  text-align: center;
  font-size: 0.5rem;
  font-weight: 400;
  align-items: center;
  justify-content: center;
  display: flex;
}

@media print {
  body,
  html {
    height: auto;
    overflow: visible;
  }

  .container {
    height: auto;
    overflow: visible;
    display: block;
  }

  .logo-container {
    opacity: 1;
  }

  .filter,
  .main-content,
  footer {
    position: static;
    height: auto;
    overflow: visible;
  }

  .main-content {
    max-width: none;
  }

  header,
  footer {
    background-color: #0f4c75 !important;
    -webkit-print-color-adjust: exact;
    print-color-adjust: exact;
  }
}

{% endraw %}

  </style>
</head>

<body>
  <div class="container">
    <header>
      <div class="logo-container">
        
{% raw %}
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1395 563.95">
  <defs>
    <style>
      .msg-logo-cls-1 {
        fill: #fff;
      }
    </style>
  </defs>
  <g id="Layer_2" data-name="Layer 2">
    <g id="Layer_1-2" data-name="Layer 1">
      <rect class="msg-logo-cls-1" y="10.97" width="26" height="500" />
      <rect class="msg-logo-cls-1" x="375" y="485.97" width="125" height="25" />
      <rect class="msg-logo-cls-1" x="474" y="10.97" width="26" height="500" />
      <rect class="msg-logo-cls-1" y="10.97" width="125" height="25" />
      <rect
        class="msg-logo-cls-1"
        x="88.72"
        y="74.34"
        width="322"
        height="25"
      />
      <path
        class="msg-logo-cls-1"
        d="M411,122.3V447.6H378V187.83L262,447.6H238L122,188.77V447.6H89V122.3h34.89L249.76,404.23,375.64,122.3Z"
      />
      <path
        class="msg-logo-cls-1"
        d="M697.53,11.93V144.65H684.07v-106l-47.32,106h-9.81L579.62,39.05v105.6H566.16V11.93h14.23l51.36,115,51.36-115Z"
      />
      <path
        class="msg-logo-cls-1"
        d="M728.5,63.57a46.67,46.67,0,0,1,18.08-18.85,52,52,0,0,1,26.36-6.63q19.42,0,32,9.61t16.26,26.16H806.79a29.55,29.55,0,0,0-11.64-17.79q-8.94-6.43-22.21-6.44a37.82,37.82,0,0,0-19.05,4.81,33.69,33.69,0,0,0-13.37,14.33q-4.9,9.51-4.9,23.37t4.9,23.47A33.59,33.59,0,0,0,753.89,130a37.82,37.82,0,0,0,19.05,4.81q13.26,0,22.21-6.44a29.61,29.61,0,0,0,11.64-18h14.43a44.1,44.1,0,0,1-16.35,26q-12.71,9.81-31.93,9.81a51.88,51.88,0,0,1-26.36-6.64A46.55,46.55,0,0,1,728.5,120.7Q722,108.49,722,92.14T728.5,63.57Z"
      />
      <path
        class="msg-logo-cls-1"
        d="M917.78,144.65,859.49,82.52v62.13H846V10.19h13.46v62.9l58.29-62.9H934.9L872,77.33l63.47,67.32Z"
      />
      <path
        class="msg-logo-cls-1"
        d="M955.09,16.93a9.7,9.7,0,0,1-2.88-7.12,9.36,9.36,0,0,1,2.88-7,10,10,0,0,1,13.85,0,9.34,9.34,0,0,1,2.89,7,9.67,9.67,0,0,1-2.89,7.12,9.77,9.77,0,0,1-13.85,0Zm13.66,22.7v105H955.29v-105Z"
      />
      <path
        class="msg-logo-cls-1"
        d="M1028.67,45q10.86-6.93,25.68-6.92a50.15,50.15,0,0,1,25.77,6.63,46.32,46.32,0,0,1,17.79,18.85q6.45,12.23,6.45,28.38t-6.45,28.46A46.67,46.67,0,0,1,1080,139.46a49.7,49.7,0,0,1-25.68,6.73q-15,0-25.87-6.83a40.66,40.66,0,0,1-15.87-17.79v23.08H999.33V2.31h13.28V62.9A42.58,42.58,0,0,1,1028.67,45Zm56.94,24.33a35.6,35.6,0,0,0-13.95-14.52,40,40,0,0,0-20-5A38.55,38.55,0,0,0,1031.94,55a37.06,37.06,0,0,0-14.14,14.81,46.3,46.3,0,0,0-5.19,22.32,46.26,46.26,0,0,0,5.19,22.31,36.93,36.93,0,0,0,14.14,14.81,38.56,38.56,0,0,0,19.71,5.2,39.34,39.34,0,0,0,20-5.1,35.94,35.94,0,0,0,13.95-14.81q5.09-9.72,5.09-22.6Q1090.7,78.87,1085.61,69.34Z"
      />
      <path
        class="msg-logo-cls-1"
        d="M1158.5,45q10.88-6.93,25.68-6.92A50.16,50.16,0,0,1,1210,44.72a46.45,46.45,0,0,1,17.79,18.85Q1234.2,75.8,1234.2,92t-6.45,28.46a46.69,46.69,0,0,1-17.89,19.05,49.68,49.68,0,0,1-25.68,6.73q-15,0-25.87-6.83a40.78,40.78,0,0,1-15.87-17.79v23.08h-13.27V2.31h13.27V62.9A42.71,42.71,0,0,1,1158.5,45Zm56.94,24.33a35.58,35.58,0,0,0-13.94-14.52,40,40,0,0,0-20-5A38.61,38.61,0,0,0,1161.77,55a37.1,37.1,0,0,0-14.13,14.81,46.19,46.19,0,0,0-5.2,22.32,46.15,46.15,0,0,0,5.2,22.31,37,37,0,0,0,14.13,14.81,38.62,38.62,0,0,0,19.72,5.2,39.34,39.34,0,0,0,20-5.1,35.92,35.92,0,0,0,13.94-14.81q5.1-9.72,5.1-22.6Q1220.54,78.87,1215.44,69.34Z"
      />
      <path
        class="msg-logo-cls-1"
        d="M1258.82,16.93a9.67,9.67,0,0,1-2.89-7.12,9.34,9.34,0,0,1,2.89-7,10,10,0,0,1,13.84,0,9.34,9.34,0,0,1,2.89,7,9.67,9.67,0,0,1-2.89,7.12,9.75,9.75,0,0,1-13.84,0Zm13.65,22.7v105H1259v-105Z"
      />
      <path
        class="msg-logo-cls-1"
        d="M1383.07,49.34Q1395,61,1395,83.1v61.55h-13.27v-60q0-17.13-8.56-26.16t-23.37-9q-15.21,0-24.24,9.61t-9,28.28v57.32h-13.47v-105h13.47V57.51A34.32,34.32,0,0,1,1331,42.8a44.13,44.13,0,0,1,21.35-5.1Q1371.14,37.7,1383.07,49.34Z"
      />
      <path
        class="msg-logo-cls-1"
        d="M583.56,326.22a38.31,38.31,0,0,1-15.87-12.89,33.84,33.84,0,0,1-6.15-18.47h14.23a27.06,27.06,0,0,0,8.66,17.22q7.7,7.41,22.5,7.4,13.67,0,21.64-7a22.67,22.67,0,0,0,8-17.79q0-8.66-4.43-13.94a27,27,0,0,0-11-7.89,172.41,172.41,0,0,0-18.08-5.68,156.49,156.49,0,0,1-21.35-7.11,34,34,0,0,1-13.47-10.77q-5.58-7.32-5.58-19.82a33,33,0,0,1,5.39-18.56,36.07,36.07,0,0,1,15.19-12.79,52.27,52.27,0,0,1,22.51-4.62q18.66,0,30.1,9.14a34.33,34.33,0,0,1,13.18,23.56H634.44q-1.35-8.26-9-14.71T604.63,205q-12.12,0-20.2,6.45t-8.08,17.6q0,8.46,4.42,13.66a28.19,28.19,0,0,0,11.06,7.88,162.73,162.73,0,0,0,18,5.77A161.93,161.93,0,0,1,631,263.61a34.44,34.44,0,0,1,13.66,10.86q5.57,7.32,5.57,19.62a34.54,34.54,0,0,1-5,17.89,36.41,36.41,0,0,1-14.81,13.66q-9.81,5.19-23.47,5.19A55.86,55.86,0,0,1,583.56,326.22Z"
      />
      <path
        class="msg-logo-cls-1"
        d="M695.51,324.39a48,48,0,0,1-18.66-18.85Q670,293.33,670,277T677,248.41a48.45,48.45,0,0,1,18.85-18.85,57.34,57.34,0,0,1,53.57,0,47.61,47.61,0,0,1,18.85,18.85Q775,260.62,775.05,277q0,16.17-6.92,28.47a47.9,47.9,0,0,1-19,18.95A55.17,55.17,0,0,1,722.15,331,53.57,53.57,0,0,1,695.51,324.39Zm45.88-9.81a36,36,0,0,0,14.33-14.23q5.47-9.53,5.48-23.38t-5.38-23.37a35.44,35.44,0,0,0-14.24-14.23,41.63,41.63,0,0,0-38.47,0A34.8,34.8,0,0,0,689,253.6q-5.29,9.53-5.29,23.37T689,300.35a35,35,0,0,0,14,14.23,39.78,39.78,0,0,0,19.14,4.71A40.31,40.31,0,0,0,741.39,314.58Z"
      />
      <path
        class="msg-logo-cls-1"
        d="M841,235.81H816.6v93.68H803.14V235.81H788.52V224.46h14.62v-7.31q0-17.11,8.75-25.2t28.37-8.08v11.55q-13.08,0-18.37,5t-5.29,16.73v7.31H841Z"
      />
      <path
        class="msg-logo-cls-1"
        d="M879.69,235.81V301q0,9.62,3.66,13.27T896.23,318h12.32v11.54H894.12q-14.24,0-21.16-6.64T866,301V235.81H851.42V224.46H866V198.11h13.66v26.35h28.86v11.35Z"
      />
      <path
        class="msg-logo-cls-1"
        d="M1069.16,224.46l-32.89,105H1022.8l-29-88.1-29,88.1H951.05l-32.89-105h13.66L958,315.83l29.43-91.37h13.46L1029.92,316l26-91.56Z"
      />
      <path
        class="msg-logo-cls-1"
        d="M1087.72,248.41a46.1,46.1,0,0,1,17.89-18.85,50.56,50.56,0,0,1,25.87-6.64q15,0,25.87,6.93A40.26,40.26,0,0,1,1173,247.54V224.46h13.46v105H1173V306.21a42.22,42.22,0,0,1-15.87,17.8q-10.87,7-25.87,7a49.68,49.68,0,0,1-25.68-6.74,46.54,46.54,0,0,1-17.89-19q-6.45-12.3-6.45-28.47T1087.72,248.41Zm80.12,6.25a37.13,37.13,0,0,0-14.14-14.81,38.61,38.61,0,0,0-19.72-5.19,39.83,39.83,0,0,0-20,5,35.42,35.42,0,0,0-14,14.52q-5.1,9.52-5.1,22.6,0,12.89,5.1,22.6a35.85,35.85,0,0,0,14,14.82,39.38,39.38,0,0,0,20,5.09,38.61,38.61,0,0,0,19.72-5.19,37.13,37.13,0,0,0,14.14-14.81,50.57,50.57,0,0,0,0-44.63Z"
      />
      <path
        class="msg-logo-cls-1"
        d="M1244.29,227.92q9.14-5.37,22.41-5.38v14h-3.65q-14.62,0-23.47,7.89t-8.85,26.35v58.67h-13.46v-105h13.46v18.66A33,33,0,0,1,1244.29,227.92Z"
      />
      <path
        class="msg-logo-cls-1"
        d="M1381.54,282.17H1294.4q.58,11.93,5.77,20.39a34,34,0,0,0,13.66,12.79,40,40,0,0,0,18.47,4.33q13.07,0,22-6.35a29.8,29.8,0,0,0,11.83-17.12h14.23a44.41,44.41,0,0,1-16.44,25.1q-12.6,9.72-31.64,9.72a53,53,0,0,1-26.55-6.64,46.84,46.84,0,0,1-18.37-18.85q-6.63-12.21-6.64-28.57t6.54-28.66a45.47,45.47,0,0,1,18.28-18.85,54,54,0,0,1,26.74-6.54q15,0,26.25,6.54a45.23,45.23,0,0,1,17.31,17.6,50.22,50.22,0,0,1,6.06,24.53Q1381.92,278.51,1381.54,282.17Zm-18-31a31.78,31.78,0,0,0-13.37-12.5,40.69,40.69,0,0,0-18.46-4.24,36.69,36.69,0,0,0-25.58,9.62q-10.59,9.63-11.74,27.12h73.87Q1368.45,259.47,1363.55,251.2Z"
      />
      <path
        class="msg-logo-cls-1"
        d="M672,419.11a46,46,0,0,0-17.6-20.87q-11.83-7.61-27.79-7.6a52.59,52.59,0,0,0-26.93,6.93,49.37,49.37,0,0,0-18.86,19.71q-6.91,12.8-6.92,29.72t6.92,29.82a49.32,49.32,0,0,0,18.86,19.81,55.83,55.83,0,0,0,52.22.86,46.86,46.86,0,0,0,18.08-17.31q6.83-11.25,7.79-26.26H621.17V443H692v9.81a68.19,68.19,0,0,1-9.62,32,63.19,63.19,0,0,1-23.18,22.6,64.74,64.74,0,0,1-32.6,8.27,66.57,66.57,0,0,1-33.86-8.75,63.2,63.2,0,0,1-24-24.43Q560,466.82,560,447t8.75-35.49a63.2,63.2,0,0,1,24-24.43,66.67,66.67,0,0,1,33.86-8.75q21.54,0,37.7,10.77t23.46,30Z"
      />
      <path
        class="msg-logo-cls-1"
        d="M743.6,412.76q9.14-5.38,22.41-5.38v14h-3.65q-14.62,0-23.47,7.88T730,455.66v58.66H716.58v-105H730V428A32.92,32.92,0,0,1,743.6,412.76Z"
      />
      <path
        class="msg-logo-cls-1"
        d="M805.54,509.23a48,48,0,0,1-18.66-18.85q-6.82-12.22-6.83-28.57T787,433.25a48.38,48.38,0,0,1,18.85-18.85,54,54,0,0,1,26.74-6.64,54.54,54.54,0,0,1,26.83,6.64,47.54,47.54,0,0,1,18.85,18.85q6.82,12.21,6.83,28.56,0,16.15-6.93,28.47a47.88,47.88,0,0,1-19,19,55.16,55.16,0,0,1-26.93,6.63A53.56,53.56,0,0,1,805.54,509.23Zm45.88-9.81a36,36,0,0,0,14.33-14.24q5.47-9.51,5.48-23.37t-5.39-23.37a35.3,35.3,0,0,0-14.23-14.23,41.55,41.55,0,0,0-38.47,0A34.74,34.74,0,0,0,799,438.44q-5.29,9.53-5.29,23.37T799,485.18a35,35,0,0,0,14,14.24,39.78,39.78,0,0,0,19.14,4.71A40.31,40.31,0,0,0,851.42,499.42Z"
      />
      <path
        class="msg-logo-cls-1"
        d="M1000.68,409.3v105H987.22V495.86a32.27,32.27,0,0,1-14.23,15,44.68,44.68,0,0,1-21.55,5.2q-18.86,0-30.77-11.64t-11.93-33.76V409.3H922v59.82q0,17.13,8.56,26.16t23.37,9q15.19,0,24.24-9.62t9-28.27V409.3Z"
      />
      <path
        class="msg-logo-cls-1"
        d="M1060.6,414.78q10.88-7,25.87-7a50.2,50.2,0,0,1,25.68,6.64A46.11,46.11,0,0,1,1130,433.25q6.45,12.21,6.45,28.37T1130,490.09a46.67,46.67,0,0,1-17.89,19,49.68,49.68,0,0,1-25.68,6.73q-14.81,0-25.77-7a42.29,42.29,0,0,1-16-17.6V564h-13.27V409.3h13.27v23.08A42.57,42.57,0,0,1,1060.6,414.78ZM1117.73,439a35.54,35.54,0,0,0-13.94-14.53,40,40,0,0,0-20-5,38.52,38.52,0,0,0-19.72,5.2,37,37,0,0,0-14.13,14.81,50.46,50.46,0,0,0,0,44.62,37.06,37.06,0,0,0,14.13,14.82,38.61,38.61,0,0,0,19.72,5.19,39.34,39.34,0,0,0,20-5.1,35.8,35.8,0,0,0,13.94-14.81q5.1-9.71,5.1-22.6Q1122.83,448.54,1117.73,439Z"
      />
    </g>
  </g>
</svg>

{% endraw %}

      </div>
      <div class="header-text">G-Cubed Charts</div>
    </header>



    <div class="filter">
      <div id="region-filter-container" class="selection-div"><p>Region Selection</p></div>
      <div id="sector-filter-container" class="selection-div"><p>Sector Selection</p></div>
    </div>

    <div class="chart-column">
      <h1 id="documentTitle"></h1>
      <h2 id="documentSubtitle"></h2>
      <h3 id="modelAndBuildLabel"></h3>
      <div id="timestamp"></div>
      <div id="documentation"></div>
      <ul id="file-list" class="file-list"></ul>
      <div id="chartpack-file-status"></div>
      <div id="data-file-status"></div>
      <div id="warnings" class="text-danger"></div>
      <div class="col-12 text-center">
        <div class="btn-group" role="group" aria-label="Chart export buttons">
          <button id="saveSVGChartsButton" class="btn btn-primary">
            Export SVG charts
          </button>
          <button id="saveJPEGChartsButton" class="btn btn-primary ml-2">
            Export JPEG charts
          </button>
          <button id="savePNGChartsButton" class="btn btn-primary ml-2">
            Export PNG charts
          </button>
          <button id="downloadCsvDataButton" class="btn btn-primary ml-2">
            Download CSV data
          </button>
        </div>
      </div>
      <div class="col-12 row chart-container" id="chart-container"></div>
    </div>

    <footer>
      <p>&copy; 2025 G-Cubed. All rights reserved.</p>
    </footer>
  </div>

  
  <script>
    // gcubed-charts configuration
    // TODO: build a better structure once requirements finalised
    document.gcubed_config = {
      // page elements
      'chartContainer': document.getElementById('chart-container'),
      'chartpackStatusContainer': document.getElementById("chartpack-file-status"),
      'dataStatusContainer': document.getElementById("data-file-status"),
      'regionFilterContainer': document.getElementById("region-filter-container"),
      'sectorFilterContainer': document.getElementById("sector-filter-container"),
      'saveSVGChartsButton': document.getElementById('saveSVGChartsButton'),
      'saveJPEGChartsButton': document.getElementById('saveJPEGChartsButton'),
      'savePNGChartsButton': document.getElementById('savePNGChartsButton'),
      'downloadCsvDataButton': document.getElementById('downloadCsvDataButton'),
      'warningsContainer': document.getElementById('warnings'),
      'documentationContainer': document.getElementById('documentation'),
      'timestampContainer': document.getElementById('timestamp'),
      'documentTitleContainer': document.getElementById('documentTitle'),
      'documentSubtitleContainer': document.getElementById('documentSubtitle'),
      'modelAndBuildLabelContainer': document.getElementById('modelAndBuildLabel'),

      // fixed config
      'showChartAnnotations': { 'selectedRegions': false, 'includedSectors': true, 'sectorsHovertexOnRegions': false},

      // all user input is b64 encoded so that Jinja2 doesn't get confused down the line
      'b64Encoded': {
        'modelVersion': `{{ modelVersion }}`,
        'modelBuild': `{{ modelBuild }}`,
        'isoTimestampString': `{{ isoTimestampString }}`,
        'documentationMdContent': `{{ documentationMdContent }}`,
        'chartPackCSV': `{{ chartPackCSV }}`,
        'projectionsCSV': `{{ projectionsCSV }}`,
        'documentTitle': `{{ documentTitle }}`,
        'documentSubtitle': `{{ documentSubtitle }}`,
      }
    }
  </script>
  

  <!-- Insert scripts required to build graphs. -->
  
    <!-- <script src="https://cdn.plot.ly/plotly-latest.min.js"></script> -->
    <script src="https://cdn.plot.ly/plotly-3.0.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.7.1/jszip.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    
  

  <!-- We bundle the local repo for both online & offline if the qualifier is "repo" -->
  
    <script>
      
{% raw %}
!function(){"use strict";function e(e){return console.time("prepareInputData"),(e=function(e){const t=e.b64Encoded;return Object.entries(t).forEach((([n,a])=>{try{e[n]=function(e){65279===e.charCodeAt(0)?(e=e.slice(1),console.error("UTF-16 BOM detected and removed")):239===e.charCodeAt(0)&&187===e.charCodeAt(1)&&191===e.charCodeAt(2)&&(e=e.slice(3),console.error("UTF-8 BOM detected and removed"));return e}(atob(a)),delete t[n]}catch(e){return console.error("Error decoding base64 configuration data",e),!1}})),e}(e))?(e.documentationMdContent=marked.parse(e.documentationMdContent),console.timeEnd("prepareInputData"),e):(alert("documentationMdContent, chartPackCSV and projectionsCSV must all be base64 encoded in the containing HTML file."),console.timeEnd("prepareInputData"),!1)}async function t(e,t){const n=new JSZip,{prefix:a,needsBase64:i}={svg:{prefix:"data:image/svg+xml,",needsBase64:!1},jpeg:{prefix:"data:image/jpeg;base64,",needsBase64:!0},png:{prefix:"data:image/png;base64,",needsBase64:!0}}[t];return e.forEach((({fileName:e,data:t})=>{const o=t.startsWith(a)?t.slice(a.length):t;i?n.file(e,o,{base64:!0}):n.file(e,decodeURIComponent(o))})),await n.generateAsync({type:"blob"})}function n(e){const t=(e=String(e)).lastIndexOf("."),n=t>0,a=n?e.slice(0,t):e,i=n?e.slice(t+1):"";let o=a.replace(/\s+/g,"-").replace(/[^a-zA-Z0-9\-_]/g,"").replace(/^[-_]+|[-_]+$/g,"");o||(o="untitled");return o.length>255&&(o=o.slice(0,255)),i?`${o}.${i}`:o}function a(e,t,a){const i=URL.createObjectURL(e),o=document.createElement("a");o.href=i,o.download=n(t),o.style.visibility="hidden",a.chartContainer.appendChild(o),o.click(),a.chartContainer.removeChild(o),setTimeout((()=>{URL.revokeObjectURL(i)}),1e4)}const i=["#1984c5","#22a7f0","#63bff0","#a7d5ed","#ebdc78","#e1a692","#de6e56","#e14b31","#c23728"],o=[i,["#ffb400","#d2980d","#a57c1b","#786028","#363445","#48446e","#5e569b","#776bcd","#9080ff"],["#e27c7c","#a86464","#6d4b4b","#503f3f","#333333","#3c4e4b","#466964","#599e94","#6cd4c5"]];function r(e,t){if(t<=0||t>e.length)throw new Error("Invalid value of X");if(1===t)return[e[0]];let n=[];if(t<=Math.ceil(4.5)){const e=Math.floor(9/(t-1));e>1&&(n=Array.from({length:Math.ceil(18/e)},((t,n)=>n*e)).slice(0,t),n[n.length-1]=8)}else{n=Array.from({length:9},((e,t)=>t));const e=9-t,a=e+1,i=Math.floor(9/a);Array.from({length:e},((e,t)=>(t+1)*i)).forEach((e=>n.splice(e,1)))}return n.map((t=>e[t]))}class s{constructor(){this._attributes={},this._warnings=[]}static get typeColumn(){return"type"}static get attributesColumn(){return"attributes"}static get variableColumn(){return"variable"}static get labelColumn(){return"label"}static get requiredColumns(){return[s.typeColumn,s.attributesColumn,s.variableColumn,s.labelColumn]}static get chartpack_attributes(){return[s.minName,s.maxName,s.startName,s.endName]}static get chart_attributes(){return[s.minName,s.maxName,s.startName,s.endName]}static get series_attributes(){return[s.colorName,s.lineName]}static get colorName(){return"color"}static get lineName(){return"line"}static get minName(){return"min"}static get maxName(){return"max"}static get startName(){return"start_year"}static get endName(){return"end_year"}addWarning(e){e&&this._warnings.push(e)}get warnings(){return this._warnings}get label(){return this._label}set label(e){this._label=e}get startYear(){const e=this._attributes[s.startName];return e?parseInt(e,10):null}get endYear(){const e=this._attributes[s.endName];return e?parseInt(e,10):null}populateAttributes(e){if(!e)return;e.split("|").forEach((e=>{const[t,n]=e.split("=");this._attributes[t]=n}))}hasAttribute(e){return Object.prototype.hasOwnProperty.call(this._attributes,e)}attribute(e){return this._attributes[e]}}class c extends Error{constructor(e){super(e),this.name="ValidationError"}}class l extends s{constructor(e){super(),this._variableName=e[s.variableColumn],this.label=e[s.labelColumn],this.populateAttributes(e[s.attributesColumn]);const t=s.series_attributes;if(Object.keys(this._attributes).forEach((e=>{if(!t.includes(e))throw new c(`Attribute, ${e}, is not a valid series attribute.`)})),!this.colorIsValid(this.colorValue))throw new c(`Series color, ${this.colorValue}, is not a valid HTML color.`);if(!this.lineIsValid(this.lineValue))throw new c(`Series line style, ${this.lineValue}, is not valid. Valid line styles are: solid, dot, dash, longdash, dashdot, longdashdot.`)}get variableName(){return this._variableName}get colorValue(){return this._attributes[s.colorName]}colorIsValid(e){if(!e)return!0;let t=(new Option).style;return t.color=e,t.color==e}lineIsValid(e){if(!e)return!0;return["solid","dot","dash","longdash","dashdot","longdashdot"].includes(e)}get lineValue(){return this._attributes[s.lineName]||"solid"}}class u extends s{constructor(e){super(),this.label=e[s.labelColumn],this.populateAttributes(e[s.attributesColumn]);const t=s.chart_attributes;Object.keys(this._attributes).forEach((e=>{if(!t.includes(e))throw new c(`Attribute, ${e}, is not a valid chart attribute.`)})),this._series=[]}get series(){return this._series}addSeries(e){if(!(e instanceof l))throw new c("Object must be a series to be added to a chart");this._series.push(e)}get variablesInChart(){return this._series.map((e=>e.variableName))}get maxValue(){const e=this._attributes[s.maxName];return e?parseFloat(e):null}get minValue(){const e=this._attributes[s.minName];return e?parseFloat(e):null}}class d extends s{constructor(e){super(),this._charts=[];let t=null,n=null,a=!0;e.forEach((e=>{const i=e[s.typeColumn];if(a){if("pack"!=i)throw new c("First row of the chartpack must have type = 'pack'.");a=!1}if("pack"===i)this.setPackDetails(e);else if("chart"===i)t&&this.addChart(t),t=new u(e);else if("series"===i)n=new l(e),t.addSeries(n);else if(""!=i)throw new c(`Invalid type, '${i}', in chartpack. Type must be 'pack', 'chart', or 'series'.`)})),t&&this.addChart(t)}setPackDetails(e){this.label=e[s.labelColumn],this.populateAttributes(e[s.attributesColumn]);const t=s.chartpack_attributes;Object.keys(this._attributes).forEach((e=>{if(!t.includes(e))throw new c(`Attribute, ${e}, is not a valid chartpack attribute.`)}))}addChart(e){if(!(e instanceof u))throw new c("Object must be a chart to be added to a pack");this._charts.push(e)}get charts(){return this._charts}get maxValue(){const e=this._attributes[s.maxName];return e?parseFloat(e):null}get minValue(){const e=this._attributes[s.minName];return e?parseFloat(e):null}}class h{#e;#t;#n;#a;#i;#o;#r;#s;#c;#l;#u;constructor(e,t,n,a=Array.from(n.keys()),i,o=0,r=0){this.#e=e,this.#t=t,this.#n=n,this.#a=new Set(a),this.#i=new Set(a),this.#o=i,this.#r=o,this.#s=r,this.#c=null,this.#u={},this.#d()}get currentSelectedOptions(){return this.#a}#d(){this.#t.textContent="",this.#t.innerText=this.#e;const e=document.createElement("div");e.className="selection-div-checkboxes",this.#l=this.#h("ALL","All",this.#a.size===this.#n.size),this.#l.addEventListener("change",(()=>this.#p())),e.appendChild(this.#l.parentNode),this.#n.forEach(((t,n)=>{const a=this.#h(n,t,this.#a.has(n));a.addEventListener("change",(()=>this.#m(n))),e.appendChild(a.parentNode),this.#u[n]=a})),this.#t.appendChild(e),e.addEventListener("mouseleave",(()=>this.#f(this.#s)))}#h(e,t,n){const a=document.createElement("label"),i=document.createElement("input");return i.type="checkbox",i.value=e,i.checked=n,a.appendChild(i),a.appendChild(document.createTextNode(" "+t)),i}#m(e){this.#u[e].checked?this.#a.add(e):this.#a.delete(e),this.#b(),this.#f(this.#r)}#p(){const e=this.#l.checked;this.#a=e?new Set(this.#n.keys()):new Set,Object.values(this.#u).forEach((t=>{t.checked=e})),this.#f(this.#r)}#b(){const e=this.#a.size===this.#n.size;this.#l.checked=e}#f(e){this.#c&&clearTimeout(this.#c),0!==e?this.#c=setTimeout((()=>{this.#g()}),e):this.#g()}#g(){this.#C()&&(this.#i=new Set(this.#a),this.#o(this.#a))}#C(){if(this.#a.size!==this.#i.size)return!0;for(let e of this.#a)if(!this.#i.has(e))return!0;return!1}}let p=null,m=null;const f=new Map,b=new Map;let g=null,C=null;const v=/,(?=[a-zA-Z0-9_]+=)/,y=/^[ag]\d+$/i,S=/\(([^)]+)\)/;const x=["type","attributes","variable","label"],w=["prefix","set_member_descriptions","description","units","vector","region"];function k(e,t,n){n.chartContainer.textContent="",F([],n),n.chartpackStatusContainer.textContent="",function(e,t,n,a){Papa.parse(t,{header:!0,complete:function(e){M(e.meta.fields,x)?a(e.data):n.chartpackStatusContainer.textContent="Invalid chartpack CSV file format."}})}(0,t,n,(function(t){try{const a=new d(t);n.chartpackStatusContainer.textContent="",p=a,n.chartpackStatusContainer.textContent=`Successfully imported chartpack ${e.name}.`,setTimeout((()=>{n.chartpackStatusContainer.textContent=""}),2e3),_(n)}catch(e){F([e.message],n),n.chartpackStatusContainer.textContent="Error parsing chartpack."}}))}function E(e,t,n){f.clear(),b.clear(),n.chartContainer.textContent="",F([],n),n.dataStatusContainer.textContent="",function(e,t,n,a){function i(){const e=Array.from(b.entries()).sort(((e,t)=>Number(e)-Number(t)));b.clear(),e.forEach((([e,t])=>{let n;n=t.sector?t.sector:t.goods?t.goods:"Unknown",b.set(e,T(n))}))}function o(e,t){const n=e.region,a=e.set_member_descriptions;if(!n||!a)return;const i=a.match(/regions=([^,]+)/);if(!i)return;const o=i?T(i[1]):null,r=t.get(n);r?r===n?t.set(n,o):r!==o&&console.error(`Region code ${n} has conflicting names: ${r} and ${o}. Will use first found: ${r}`):t.set(n,o||n)}function r(e,t,n){const a=L(e);if(!a)return;const i=/^[ag]\d+$/i;a.forEach(((a,o)=>{if(!i.test(a))return;const r=a[0].toLowerCase();if("a"!==r&&"g"!==r)return void console.error(`buildSectorLookup: Found dimension that looks like a good or sector but isn't: ${a}`);const s=t.set_member_descriptions.trim();if(!s)return void console.error(`buildSectorLookup: No set member descriptions found for variable ${e}`);const c="g"===r?"goods":"sector",l=a.slice(1),u=[...s.split(v).map((e=>e.trim()))],d=u[o]?u[o].split("=")[1]:"",h={[c]:d},p=n.get(l);if(p){const e=p[c];e?e!==d&&console.error(`buildSectorLookup: Conflicting sector description for '${c}' with key '${l}'. Existing: '${e}', New: '${d}' found in '${s}', keeping the existing value.`):(p[c]=d,n.set(l,p))}else n.set(l,h)}))}console.time("parseProjectionsCSV"),Papa.parse(t,{header:!0,complete:function(e){const t=e.meta.fields;if(M(t,w)){const n={},s=t[0];e.data.forEach((e=>{const t=e[s];t&&(n[t]=e,r(t,e,b)),o(e,f)})),i(),console.timeEnd("parseProjectionsCSV"),a(n)}else console.timeEnd("parseProjectionsCSV"),n.dataStatusContainer.textContent="Invalid column headings in the projections CSV file."}})}(0,t,n,(function(t){0==n.dataStatusContainer.textContent.length&&(m=t,n.dataStatusContainer.textContent=`Successfully imported projections '${e.name}'.`,setTimeout((()=>{n.dataStatusContainer.textContent=""}),1500),_(n))}))}function _(e){if(!p||!m)return;e.chartContainer.textContent="",C=new h("Region Selection",e.regionFilterContainer,f,void 0,$,0,0),g=new h("Sector Selection",e.sectorFilterContainer,b,void 0,A,0,0);let t=[];const s=Object.keys(m),c=m[s[0]]||{},l=Object.keys(c).filter((e=>/^\d{4}$/.test(e))).map(Number),u=Math.min(...l),d=Math.max(...l);let y=null,S=null;p.charts.forEach(((s,c)=>{const l=document.createElement("div");l.className=`gCubedChartDiv gCubedChartDiv-${c}`,e.chartContainer.appendChild(l);const h=document.createElement("div");h.className=`gCubedChartPlotlyDiv gCubedChartPlotlyDiv-${c}`,l.appendChild(h);const f=document.createElement("div");f.className="applicableSectors",l.appendChild(f);const b=document.createElement("div");b.className="chartDataTable",l.appendChild(b);const g={data:[],layout:{autosize:!0,title:{text:s.label||"Chart",x:.5,xanchor:"center",yanchor:"top",automargin:!1,yref:"container",font:{size:14,weight:700,textcase:"word caps"}},yaxis:{},legend:{orientation:"h",yanchor:"top",y:-.12,yref:"paper",entrywidth:0,font:{size:10,textcase:"word caps"}},hovermode:"closest",shapes:[{type:"rect",xref:"paper",yref:"paper",x0:0,y0:0,x1:1,y1:1,line:{color:"black",width:1}}]},config:{responsive:!0,useResizeHandler:!0,modeBarButtonsToAdd:[{name:"Download CSV",icon:Plotly.Icons.disk,click:function(t){const i=[["Year"]];t.data.forEach((e=>{i[0].push(e.name),e.x.forEach(((t,n)=>{i[n+1]||(i[n+1]=[t]),i[n+1].push(e.y[n])}))})),function(e,t,i){const o=e.map((e=>e.join(","))).join("\n"),r=new Blob([o],{type:"text/csv;charset=utf-8"});t=I(n(t),i),a(r,`${t}.csv`,i)}(i,s.label,e)}},{name:"Show/Hide Table",icon:Plotly.Icons.drawrect,click:function(e){j(e,b)}}]}},C=s.startYear||p.startYear||u,x=s.endYear||p.endYear||d;y=null!=s.minValue?s.minValue:null!=p.minValue?p.minValue:null,S=null!=s.maxValue?s.maxValue:null!=p.maxValue?p.maxValue:null;let w=!0;let k=null,E=!0,_=new Set,$={},A=new Set,V=new Set;if(s.series.forEach((e=>{const t=m[e.variableName];if(t){const n=t.units;if(null===k)k=n;else if(k!==n)return void(E=!1);const a=t.set_member_descriptions||"",i=[`variable=${t.description||""} (${t.prefix||""})`,...a.split(v).map((e=>e.trim()))];$[e.variableName]=i,_=0==_.size?new Set(i):new Set(i.filter((e=>_.has(e)))),A.add(t.region);const o=O(e.variableName);V.add(...o)}})),!s.label){const e=[..._].map((e=>e.split("=")[1]));s.label=e.join(", "),g.layout.title.text=s.label}if(!E)return void t.push(`Chart ${s.label} has inconsistent units and will not be shown.`);const L=function(e){if(e<=9)return r(i,e);let t=Math.ceil(e/3),n=[];for(let a of o){n.length+t>e&&(t=e-n.length);const i=r(a,t);n=n.concat(i)}return n}(s.series.length);s.series.forEach((e=>{const n=m[e.variableName];if(n){if(!e.label){const t=$[e.variableName].filter((e=>!_.has(e))).map((e=>e.split("=")[1])).join(", ");e.label=t}const t=L.pop(0),a=e.colorValue||t,i=[],o=[];for(let e=C;e<=x;e++){i.push(e);const t=""==n[e]?null:Number(n[e]);o.push(t),Math.abs(t)>1e-4&&(w=!1)}g.data.push({x:i,y:o,type:"scatter",mode:"lines",name:e.label||e.variableName,line:{color:a,dash:e.lineValue},meta:{regionCode:n.region,sectorNums:O(e.variableName)}})}else t.push(`No data for series ${e.label||e.variableName}`)})),g.layout.yaxis.title={text:k,font:{size:12,weight:600,textcase:"word caps"}},w?g.layout.yaxis.range=[0,1]:null!==y&&null!==S?g.layout.yaxis.range=[y,S]:null!==y?g.layout.yaxis.range=[y,Math.max(...g.data.map((e=>Math.max(...e.y))))]:null!==S?g.layout.yaxis.range=[Math.min(...g.data.map((e=>Math.min(...e.y)))),S]:g.layout.yaxis.autorange=!0,Plotly.newPlot(h,g.data,g.layout,g.config).then((t=>{if(t._fullLayout&&t._fullLayout.margin&&t._fullLayout.margin.l){const e=t._fullLayout.margin.l;f.style.marginLeft=`${e}px`}else console.warn("No left margin found in gd._fullLayout.margin.l - applicable sectors will not be aligned");t.on("plotly_afterplot",(()=>{b.innerHTML&&j(t,b,!0)})),t.on("plotly_restyle",(function(){N(t,f,e)})),N(t,f,e)}))})),F(t,e),P()}function N(e,t,n){const a=n.showChartAnnotations.selectedRegions,i=n.showChartAnnotations.includedSectors,o=n.showChartAnnotations.sectorsHovertexOnRegions;if(!a&&!i)return;const r={annotations:[]},s=new Set,c=new Set;let l;if(e.data.forEach((e=>{"legendonly"!==e.visible&&(s.add(e.meta.regionCode||"N/A"),(i||o)&&e.meta.sectorNums&&e.meta.sectorNums.length&&c.add(...e.meta.sectorNums))})),i||o?(l=Array.from(c).sort(((e,t)=>Number(e)-Number(t))).map((e=>b.get(e)||e)),i&&(t.textContent=`Includes series with sectors: ${l.length>0?l.join(", "):" N/A"}`)):l=[],a){const e=Array.from(s);r.annotations.push({x:1,y:1,xref:"paper",yref:"paper",text:`Selected Regions: ${e.join(", ")}`,showarrow:!1,align:"right",hovertext:a&&o?`Includes series with sectors: ${l.length>0?l.join(", "):" N/A"}`:null})}Plotly.relayout(e,r),P()}function $(e){V(e,g.currentSelectedOptions)}function A(e){V(C.currentSelectedOptions,e)}function V(e,t){document.querySelectorAll(".gCubedChartPlotlyDiv").forEach((n=>{const a=n,i=a.data.map((n=>{const a=n.meta.regionCode,i=n.meta.sectorNums,o=e.has(a),r=[...t].some((e=>i.includes(e)));return!!(o&&0==n.meta.sectorNums.length||o&&r)||"legendonly"}));Plotly.restyle(a,"visible",i)}))}function O(e){const t=L(e);if(t)return t.filter((e=>y.test(e))).map((e=>e.slice(1)))}function L(e){if(!e)return;const t=e.match(S);return t?t[1].split(",").map((e=>e.trim())):void 0}function M(e,t){return t.every((t=>e.includes(t)))}function j(e,t,n=!1){if(t.innerHTML&&(t.textContent="",!n))return;const a=document.createElement("table"),i=document.createElement("tr"),o=document.createElement("th");o.textContent="Year",i.appendChild(o),e.data.forEach((e=>{if(!0===e.visible||void 0===e.visible){const t=document.createElement("th");t.textContent=e.name,i.appendChild(t)}})),a.appendChild(i),e.data[0].x.forEach(((t,n)=>{const i=document.createElement("tr"),o=document.createElement("td");o.textContent=t,i.appendChild(o),e.data.forEach((e=>{if(!0===e.visible||void 0===e.visible){const t=document.createElement("td");t.textContent=e.y[n],i.appendChild(t)}})),a.appendChild(i)})),t.appendChild(a)}function T(e){return e.split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" ")}function P(){console.log("Triggering resize event"),window.dispatchEvent(new Event("resize"))}function D(e){e.documentTitleContainer.textContent=e.documentTitle,e.documentSubtitleContainer.textContent=e.documentSubtitle,e.modelAndBuildLabelContainer.textContent=`G-Cubed Model: ${e.modelVersion} Build: ${e.modelBuild}`,e.documentationContainer.innerHTML=e.documentationMdContent,e.timestampContainer.textContent=`Generated ${new Date(e.isoTimestampString).toString()}`,function(e){e.saveSVGChartsButton.style.display="block",e.saveJPEGChartsButton.style.display="block",e.savePNGChartsButton.style.display="block",e.downloadCsvDataButton.style.display="block"}(e),function(e){document.addEventListener("dragover",(e=>{e.preventDefault()})),document.addEventListener("drop",(t=>{t.preventDefault();!function(e,t){for(const n of e){const e=new FileReader;e.onload=function(e){const a=e.target.result,i=a.substring(0,a.indexOf("\n"));i.includes("type")&&i.includes("attributes")&&i.includes("variable")&&i.includes("label")?k(n,a,t):E(n,a,t)},e.readAsText(n)}}(t.dataTransfer.files,e)})),e.saveSVGChartsButton.addEventListener("click",(async function(){const n=await B(e.chartContainer,"svg",1);a(await t(n,"svg"),I("SVG_charts.zip",e),e)})),e.saveJPEGChartsButton.addEventListener("click",(async function(){const n=await B(e.chartContainer,"jpeg",3);a(await t(n,"jpeg"),I("JPEG_charts.zip",e),e)})),e.savePNGChartsButton.addEventListener("click",(async function(){const n=await B(e.chartContainer,"png",3);a(await t(n,"png"),I("PNG_charts.zip",e),e)})),e.downloadCsvDataButton.addEventListener("click",(function(){const t=`G-Cubed_${e.modelVersion}_${e.modelBuild}_${z(e.isoTimestampString)}.csv`;a(new Blob([e.projectionsCSV],{type:"text/csv;charset=utf-8;"}),t,e)}))}(e)}async function B(e,t,a=3){const i=e.querySelectorAll(".gCubedChartPlotlyDiv"),o=[];let r=1;for(const e of i){const i=n("Chart "+r+" - "+e.querySelector(".gtitle").textContent),s=await Plotly.toImage(e,{format:t,scale:a});o.push({fileName:`${i}.${t}`,data:s}),r++}return o}function I(e,t){const n=t.modelVersion?`_${t.modelVersion}`:"",a=t.modelBuild?`_${t.modelBuild}`:"",i=t.isoTimestampString?`_${z(t.isoTimestampString)}`:"";if(n||a||i){const t=e.lastIndexOf(".");if(t>0){return`${e.slice(0,t)}_G-Cubed${n}${a}${i}${e.slice(t)}`}return`${e}_G-Cubed${n}${a}${i}`}return e}function z(e){const t=new Date(e);return`${t.getFullYear()}${String(t.getMonth()+1).padStart(2,"0")}${String(t.getDate()).padStart(2,"0")}-${String(t.getHours()).padStart(2,"0")}${String(t.getMinutes()).padStart(2,"0")}-${t.toLocaleTimeString("en-AU",{timeZoneName:"short"}).split(" ")[2]}`}function F(e,t){0===e.length?t.warningsContainer.textContent="":t.warningsContainer.innerHTML=e.join("<br>")}document.addEventListener("DOMContentLoaded",(function(){console.time("gcubed-charts"),console.timeLog("gcubed-charts","Start retrieving and validating gcubed_config");const t=function(e){const t=[];let n=document[e];"object"!=typeof n&&(t.push(`G-Cubed charts configuration object ${e} is missing or invalid!\n"document.gcubed_config" should be defined in the containing HTML page.\n`),n={});const a=["chartContainer","chartpackStatusContainer","dataStatusContainer","regionFilterContainer","sectorFilterContainer","saveSVGChartsButton","saveJPEGChartsButton","savePNGChartsButton","downloadCsvDataButton","warningsContainer","documentationContainer","timestampContainer","b64Encoded","b64Encoded.modelVersion","b64Encoded.modelBuild","b64Encoded.isoTimestampString","b64Encoded.documentationMdContent","b64Encoded.chartPackCSV","b64Encoded.projectionsCSV","b64Encoded.documentTitle"];for(const e of a)i=n,e.split(".").reduce(((e,t)=>e&&e[t]),i)||t.push(`Missing or invalid value for required field: ${e}`);var i;if(t.length>0){let e=`Configuration validation errors:\n\t* ${t.join("\n\t* ")}\n\nG-Cubed charts will not be generated.`;return console.error(e),alert(e),!1}return n}("gcubed_config");t?(console.timeLog("gcubed-charts","Start preparing input data"),e(t),console.timeLog("gcubed-charts","Start preparing page"),D(t),console.timeLog("gcubed-charts","Start preparing and displaying internal chart data"),function(e){const t=new File([e.chartPackCSV],"chartpack.csv",{type:"text/csv"}),n=new File([e.projectionsCSV],"projections.csv",{type:"text/csv"});k(t,e.chartPackCSV,e),E(n,e.projectionsCSV,e)}(t),console.timeEnd("gcubed-charts")):console.error("Invalid gcubed_config. Exiting...")}))}();

{% endraw %}

    </script>
  

</body>
</html>